extends KinematicBody2D
class_name Enemy


var hud
const Bullet = preload("res://Bullet.tscn")
var input_vector = Vector2.ZERO
var velocity = Vector2(0,0)
export (int) var speed = 66
var color = 0
var ah = 4

func ouch():
	$AnimationPlayer.play("death")
	take_damage(1)

func _physics_process(delta):
		global_position.x -= speed * delta

func take_damage(damage):
	$AnimationPlayer.play("death")
	ah -= 1
	$ah.text = str(ah)
	if ah <= 1:
		$AnimationPlayer.play("death")
		queue_free()

func _on_Timer_timeout():
	take_damage(1)


func _on_sides_checker_body_entered(body):
	if body.is_in_group("Players"):
		body.ouch()
		body.take_damage(1)
		$AnimationPlayer.play("death")
	if body.is_in_group("Players"):
		body.ouch()
		body.take_damage(1)
		$AnimationPlayer.play("death")

func _on_AnimationPlayer_animation_finished(anim_name):
		$Timer.start()



func _on_top_checker_body_entered(body):
	if body.is_in_group("Players"):
		ouch()
	if body.is_in_group("Laser"):
		ouch()
